<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png"> <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png"> <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"> <link rel="manifest" href="manifest.json"> <meta name="application-name" content="Directivas OS10">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="apple-touch-startup-image" href="splash-640x1136.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)">
    <link rel="apple-touch-startup-image" href="splash-750x1334.png" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)">
    <title>Directivas de Funcionamiento OS10</title>

    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;400;600&display=swap" rel="stylesheet">
    
    <style>
        /* Estilos generales */
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 20px;
            color: #374151; /* Gris oscuro para texto */
            transition: background-color 0.3s ease, color 0.3s ease;
            box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.1);
            
            /* Imagen de fondo - Se usará la versión más reciente de 101.jpg que hayas subido */
            background-image: url("101.jpg"); 
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed; /* Puede impactar el rendimiento en móviles, considera alternativas si es necesario */
        }

        /* Estilo para el logo OS10 */
        .logo-os10 {
            position: absolute;
            top: 20px;
            left: 20px;
            width: 80px; /* Define un ancho base */
            height: auto; /* Mantiene la proporción */
            opacity: 0.7;
            z-index: 10;
            transition: opacity 0.3s ease;
            border-radius: 50%; /* Si el logo es circular, esto ayuda */
        }
        .logo-os10:hover {
            opacity: 1;
        }

        @media (max-width: 640px) {
            .logo-os10 {
                width: 60px;
                top: 15px;
                left: 15px;
            }
        }

        @media (max-width: 480px) {
            .logo-os10 {
                width: 50px;
                top: 10px;
                left: 10px;
            }
        }

        /* Estilo para el QR en la sección 4 */
        .qr-container-section4 {
            width: 60px;
            height: 60px;
            float: right; /* Considera usar Flexbox o Grid para mejor control de layout */
            margin-top: 40px;
            margin-right: 1px;
            margin-bottom: 10px;
            position: relative; /* z-index solo funciona con posicionamiento no estático */
            z-index: 1;
        }

        /* Ajuste para que el contenido no se solape con el QR */
        .section-yellow ul {
            /* 'clear: right' es una técnica antigua. Considera Flexbox/Grid para layouts modernos. */
            /* clear: right; */
        }

        /* Ajustes para dispositivos móviles */
        @media (max-width: 640px) {
            .qr-container-section4 {
                width: 50px;
                height: 50px;
                margin-right: 8px;
                margin-top: 45px;
            }
        }

        @media (max-width: 480px) {
            .qr-container-section4 {
                width:50px;
                height: 50px;
                margin-right: 4px;
                margin-top: 45px;
            }
        }

        /* Clase para textos normales */
        .normal-text {
            color: #1f2937 !important; /* Un gris más oscuro para mejor contraste */
            font-weight: 400 !important;
            font-size: 1.05rem !important; /* Tamaño de fuente base consistente */
        }

        /* Estilo base para los botones de descarga */
        .download-btn {
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            display: flex; /* Usar flex para centrar contenido */
            justify-content: center;
            align-items: center;
            margin-bottom: 15px; /* Espaciado consistente */
            width: 190px;
            height: 40px; /* Altura fija para consistencia */
            font-size: 1rem !important;
            font-weight: 600 !important;
            padding: 10px 15px !important;
            border-radius: 8px !important;
            opacity: 0.9;
            letter-spacing: 0.5px; /* Espaciado de letras sutil */
            color: white !important;
            text-align: center !important;
        }

        .download-btn:hover {
            transform: translateY(-3px); /* Sutil efecto hover */
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
            opacity: 1;
        }

        /* Colores específicos para los botones */
        .section-blue .download-btn { background-color: #0a73c3 !important; }
        .section-blue .download-btn:hover { background-color: #0861a5 !important; }
        .section-green .download-btn { background-color: #1ccfc3 !important; }
        .section-green .download-btn:hover { background-color: #18b6ab !important; }
        .section-red .download-btn { background-color: #f01317 !important; }
        .section-red .download-btn:hover { background-color: #d10f13 !important; }
        .section-yellow .download-btn { background-color: #f5b508 !important; }
        .section-yellow .download-btn:hover { background-color: #d99c07 !important; }

        /* Animación de salto */
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); } /* Reducido para ser menos intrusivo */
            60% { transform: translateY(-5px); }
        }
        .bounce-animation { animation: bounce 2s ease infinite !important; }

        .card-container {
            max-width: 800px;
            margin: 40px auto; /* Más margen superior */
            padding: 30px;
            background-color: #F2FFFD; /* Un color de fondo muy claro */
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            opacity: 0; /* Para animación de entrada */
            animation: slideUp 0.8s ease-out 0.3s forwards; /* Animación más rápida */
            position: relative;
        }

        /* Efectos para subtítulos (div con borde lateral) */
        div.border-l-4 {
            transition: transform 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.02);
            padding-top: 0.8rem;
            padding-bottom: 0.8rem;
            margin-bottom: 1.2rem;
            border-radius: 0 4px 4px 0;
        }
        div.border-blue-500 { border-color: #0a73c3 !important; border-width: 2px !important; background-color: #F1F7FF !important; }
        div.border-green-500 { border-color: #1ccfc3 !important; border-width: 2px !important; background-color: #F6FFFD !important; }
        div.border-red-500 { border-color: #f01317 !important; border-width: 2px !important; background-color: #FFF8F8 !important; }
        div.border-yellow-500 { border-color: #f5b508 !important; border-width: 2px !important; background-color: #FFFFEF !important; }

        div.border-l-4:hover,
        div.border-l-4.clicked {
            transform: translateX(3px);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08);
        }
        .clicked { /* Para mantener el estado visual si es necesario por JS */
            transform: translateX(3px) !important;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08) !important;
        }

        div.border-l-4 h3 {
            font-size: 1.3rem !important;
            margin-bottom: 0.8rem;
        }

        .button-container {
            display: flex;
            justify-content: flex-start; /* Alinea botones a la izquierda */
            width: 100%;
            margin-top: 8px;
        }

        /* Estilos para el banner de instalación */
        #install-banner, #ios-install-banner {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background-color: rgba(10, 115, 195, 0.95); /* Color más opaco */
            color: white;
            font-weight: bold;
            padding: 15px; /* Padding reducido */
            text-align: center;
            z-index: 1000;
            display: none; /* Oculto por defecto */
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        #install-banner button, #ios-install-banner button {
            margin-left: 10px;
            padding: 8px 16px;
            background: white;
            color: #0a73c3;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            transition: background-color 0.2s ease;
        }
        #install-banner button:hover, #ios-install-banner button:hover {
            background-color: #f0f0f0;
        }
        #ios-install-banner { flex-direction: column; align-items: center; }
        #ios-install-banner .instructions { display: flex; align-items: center; justify-content: center; margin-top: 10px; }
        #ios-install-banner .share-icon { width: 20px; height: 20px; margin: 0 5px; vertical-align: middle; }
        #ios-install-banner button { margin-top: 10px; }

        /* Modo oscuro */
        @media (prefers-color-scheme: dark) {
            body { background-color: #111827; color: #e2e8f0; box-shadow: none; }
            .card-container { background-color: #1f2937; /* Un poco más claro que el body */ color: #e2e8f0; box-shadow: 0 4px 8px rgba(0,0,0, 0.3); } /* Sombra más oscura */
            div.border-l-4 { border-color: #374151 !important; box-shadow: 0 2px 4px rgba(0,0,0, 0.2); background-color: #1f2937 !important; }
            div.border-blue-500 { border-color: #3b82f6 !important; }
            div.border-green-500 { border-color: #10b981 !important; }
            div.border-red-500 { border-color: #ef4444 !important; }
            div.border-yellow-500 { border-color: #f59e0b !important; }
            h1, h2, h3, h4, h5, h6 { color: #f9fafb; }
            .normal-text { color: #d1d5db !important; } /* Texto ligeramente menos brillante */
            a:hover { color: #ffffff; }
            .download-btn { opacity: 1; }
            .section-blue .download-btn { background-color: #3b82f6 !important; }
            .section-blue .download-btn:hover { background-color: #2563eb !important; }
            .section-green .download-btn { background-color: #10b981 !important; }
            .section-green .download-btn:hover { background-color: #059669 !important; }
            .section-red .download-btn { background-color: #ef4444 !important; }
            .section-red .download-btn:hover { background-color: #dc2626 !important; }
            .section-yellow .download-btn { background-color: #f59e0b !important; }
            .section-yellow .download-btn:hover { background-color: #d97706 !important; }
            #install-banner, #ios-install-banner { background-color: rgba(30, 64, 175, 0.95); }
            #install-banner button, #ios-install-banner button { background-color: #e0e7ff; color: #1e3a8a; } /* Contraste mejorado */
        }

        /* Estilos para móviles */
        @media (max-width: 640px) {
            body { font-size: 16px; padding: 12px; box-shadow: inset 0 0 10px rgba(0,0,0,0.05); }
            .card-container { padding: 20px; margin: 20px auto; box-shadow: 0 4px 15px rgba(0,0,0,0.1); } /* Sombra más sutil */
            .normal-text { font-size: 1rem !important; }
            ul li { margin-bottom: 0.7rem; }
            div.border-l-4 { padding-top: 0.6rem; padding-bottom: 0.6rem; }
            div.border-l-4:hover { box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
            .download-btn { width: 100% !important; /* Botones ocupan todo el ancho disponible */ max-width: 280px; margin-left: auto !important; margin-right: auto !important; height: 48px !important; font-size: 0.95rem !important; font-weight: 600 !important; }
            .button-container { justify-content: center !important; } /* Centrar botones en móvil */
            #ios-install-banner { padding: 10px; font-size: 14px; }
            #ios-install-banner .instructions { flex-direction: column; margin-top: 5px; }
            #ios-install-banner .step { margin: 5px 0; }
        }

        /* Ajustes específicos para pantallas muy pequeñas */
        @media (max-width: 480px) {
            body { padding: 8px; }
            .card-container { padding: 15px; }
            div.border-l-4 h3 { font-size: 1.15rem !important; } /* Títulos de sección más pequeños */
            .download-btn { font-size: 0.9rem !important; }
        }

        /* Animación de entrada */
        @keyframes slideUp {
            from { transform: translateY(30px); opacity: 0; } /* Comienza un poco más abajo */
            to { transform: translateY(0); opacity: 1; }
        }

        /* Efecto de brillo mejorado para botones */
        .download-btn {
            box-shadow: 0 3px 6px rgba(0,0,0,0.12) !important; /* Sombra más suave */
        }
        .download-btn:hover, .download-btn:active {
            transform: translateY(-2px) !important; /* Menos movimiento */
            box-shadow: 0 5px 10px rgba(0,0,0,0.18) !important; /* Sombra hover más pronunciada */
        }

        /* Sombra específica para el botón de tramitar credenciales (amarillo) */
        #tramitarCredenciales {
            box-shadow: 0 4px 8px rgba(245, 181, 8, 0.4) !important;
        }
        #tramitarCredenciales:hover,
        #tramitarCredenciales:active,
        #tramitarCredenciales.bounce-animation { /* Mantener sombra durante la animación */
            box-shadow: 0 6px 12px rgba(245, 181, 8, 0.5) !important;
        }
    </style>
</head>
<body class="text-gray-800">
    <div id="install-banner">
        ¿Quieres instalar esta app? 
        <button id="install-button-android">Instalar</button>
        <button id="close-banner-android">No, gracias</button>
    </div>
   
    <div id="ios-install-banner">
        <div>Instala esta app en tu iPhone/iPad</div>
        <div class="instructions">
            <div class="step">1. Toca <svg class="share-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" y1="2" x2="12" y2="15"/></svg> compartir</div>
            <div class="step">2. Selecciona "Añadir a pantalla inicio"</div>
        </div>
        <button id="close-banner-ios">Entendido</button>
    </div>

    <div class="card-container bg-white rounded-xl shadow-md p-6 space-y-6 relative">
        <a href="https://www.zosepcar.cl/OS10.php" target="_blank" rel="noopener">
            <img src="logo-os10.jpg" alt="Logo OS10 Prefectura Seguridad Privada Carabineros de Chile" class="logo-os10" width="80" height="80"> </a>

        <header class="text-center pt-12"> <h1 class="text-2xl font-bold">DIRECTIVA DE FUNCIONAMIENTO</h1>
            <h2 class="text-lg font-semibold text-gray-700">Instalación - Eventos - Partidos de Fútbol Profesional</h2>
        </header>
        
        <main class="space-y-4">
           <section class="border-l-4 border-blue-500 pl-4 section-blue">
                <h3 class="font-bold">1️⃣ Presentar Directiva DD.FF.</h3>
                <ul class="list-disc pl-5 text-sm normal-text">
                    <li>Vigencia 03 años en instalación</li>
                    <li>Presentar con 15 días hábiles de anticipación a la fecha del establecimiento del servicio.</li>
                    <li>
                        Referencias:
                        <a href="https://www.bcn.cl/leychile/navegar?idNorma=9081" target="_blank" rel="noopener" class="text-blue-600 hover:underline">Dec. 93/1985</a>,
                        <a href="https://www.zosepcar.cl/content/OS10/Decreto-261.pdf" target="_blank" rel="noopener" class="text-blue-600 hover:underline">Dec. 261 (IV.4)</a>,
                        <a href="https://www.bcn.cl/leychile/navegar?idNorma=1200633" target="_blank" rel="noopener" class="text-blue-600 hover:underline">Dec. 32/2024</a>
                   </li>
               </ul>
           </section>
           
           <section class="border-l-4 border-green-500 pl-4 section-green">
               <h3 class="font-bold">2️⃣ Documentación</h3>
               <ul class="space-y-3 pl-5 text-sm normal-text">
                   <li>
                       <span>02 Solicitudes Simple.</span>
                       <div class="button-container">
                           <a href="https://dal5.short.gy/Solic" target="_blank" rel="noopener" class="download-btn" title="Descargar Solicitud">Descargar Solicit.</a>
                       </div>
                   </li>
                   <li>
                       <span>01 copia DD.FF. completa.</span>
                       <div class="button-container">
                           <a href="https://dal5.short.gy/D" target="_blank" rel="noopener" class="download-btn" title="Descargar Plantilla Word Directiva">Descargar Word</a>
                       </div>
                   </li>
                   <li>
                       <span>Requisitos según tipo, Instalación, Eventos, Partidos de Fútbol Prof.</span>
                       <div class="button-container">
                           <a href="https://dal5.short.gy/Re24" target="_blank" rel="noopener" class="download-btn" title="Descargar Requisitos 2024">Descargar Requis.</a>
                       </div>
                   </li>
                   <li>
                       <span>Uniforme Decreto 32/2024.</span>
                       <div class="button-container">
                           <a href="https://dal5.short.gy/0u" target="_blank" rel="noopener" class="download-btn" title="Ver Ejemplo de Uniforme">Ejemplo Uniforme</a>
                       </div>
                   </li>
                   <li>
                       <span>Análisis de Vulnerabilidades.</span>
                       <div class="button-container">
                           <a href="https://dal5.short.gy/6ydn" target="_blank" rel="noopener" class="download-btn" title="Descargar Plantilla Análisis de Vulnerabilidades">Descargar Anális.</a>
                       </div>
                   </li>
                   <li>
                        <span>Solicitud de Uniforme Distinto.</span>
                        <div class="button-container">
                            <a href="https://d6.short.gy/G8" target="_blank" rel="noopener" class="download-btn" title="Descargar Solicitud Uniforme Distinto">Descargar Word</a>
                        </div>
                  </li>
               </ul>
           </section>
           
           <section class="border-l-4 border-red-500 pl-4 section-red">
               <h3 class="font-bold">3️⃣ Todo escaneado en Digital.</h3>
               <ul class="list-disc pl-5 text-sm normal-text">
                   <li>
                       <span>Escanear todo en 01 archivo PDF (Pendrive)</span>
                       <span>Página Unir PDF:</span>
                       <div class="button-container">
                           <a href="https://dal5.short.gy/I" target="_blank" rel="noopener" class="download-btn" title="Ir a herramienta para unir PDF">Herramienta</a>
                       </div>
                   </li>
               </ul>
           </section>
           
           <section class="border-l-4 border-yellow-500 pl-4 section-yellow">
               <h3 class="font-bold">4️⃣ Tramitar Credenciales</h3>
               <ul class="list-disc pl-5 text-sm normal-text">
                   <li>
                       <span>Resol. 1.199 (27.03.2025) Amplia plazo 6 meses para su tramitación.</span>
                       <div class="button-container">
                           <a href="https://dal5.short.gy/rV1C1t" target="_blank" rel="noopener" class="download-btn" id="DescargarDocumentos" title="Descargar Resolución 1.199">Descargar Docum..</a>
                       </div>
                   </li>
                   <li>
                       <span>Tramitar credenciales (ver requisitos y formatos).</span>
                       <div class="button-container">
                           <a href="credenciales_optimized.html" class="download-btn" id="tramitarCredenciales" title="Ver Información para Tramitar Credenciales">Tramitar Credenc..</a>
                       </div>
                   </li>
                   <li>
                       <span>Más información:</span>
                        <div class="qr-container-section4 mt-2"> <img src="https://placehold.co/60x60/E2E8F0/333333?text=QR" alt="Código QR para más información" class="w-full h-full object-contain"> 
                        </div>
                   </li>
               </ul>
           </section>
       </main>
       
       <footer class="text-center text-gray-600 text-sm mt-8 normal-text">
          <ul class="space-y-1"> <li>Haga clic en los botones para descargar.</li>
               <li>&copy;2025 - Daniel Figueroa Ch.</li>
               <li>Ingeniero en Informática.</li>
          </ul>
       </footer>
   </div>
   
   <script defer>
   // Script movido aquí y con 'defer'
   document.addEventListener('DOMContentLoaded', function() {
       let deferredPrompt;
       const androidBanner = document.getElementById('install-banner');
       const iosBanner = document.getElementById('ios-install-banner');
       const androidInstallButton = document.getElementById('install-button-android');
       const androidCloseBanner = document.getElementById('close-banner-android');
       const iosCloseBanner = document.getElementById('close-banner-ios');

       const isIOS = () => /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
       const isSafari = () => /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
       const isInStandaloneMode = () => ('standalone' in window.navigator && window.navigator.standalone) || window.matchMedia('(display-mode: standalone)').matches;

       const showIOSBanner = () => {
           if (isIOS() && isSafari() && !isInStandaloneMode() && !localStorage.getItem('iosBannerClosed')) {
               if(iosBanner) iosBanner.style.display = 'flex'; // Check if iosBanner exists
               localStorage.setItem('iosBannerShown', 'true');
               setTimeout(() => { if(iosBanner) iosBanner.style.display = 'none'; }, 15000);
           }
       };

       if (isIOS()) {
           setTimeout(showIOSBanner, 2000);
           if(iosCloseBanner) iosCloseBanner.addEventListener('click', () => {
               if(iosBanner) iosBanner.style.display = 'none';
               localStorage.setItem('iosBannerClosed', 'true');
           });
       } else {
           window.addEventListener('beforeinstallprompt', (e) => {
               e.preventDefault();
               deferredPrompt = e;
               if (!localStorage.getItem('androidBannerClosed') && androidBanner) {
                   setTimeout(() => { androidBanner.style.display = 'block'; }, 2000);
               }
           });
           if(androidInstallButton) androidInstallButton.addEventListener('click', () => {
               if(androidBanner) androidBanner.style.display = 'none';
               if (deferredPrompt) {
                   deferredPrompt.prompt();
                   deferredPrompt.userChoice.then((choiceResult) => {
                       if (choiceResult.outcome === 'accepted') {
                           console.log('Usuario aceptó la instalación de PWA');
                       }
                       deferredPrompt = null;
                   });
               }
           });
           if(androidCloseBanner) androidCloseBanner.addEventListener('click', () => {
               if(androidBanner) androidBanner.style.display = 'none';
               localStorage.setItem('androidBannerClosed', 'true');
           });
       }

       const tramitarBtn = document.getElementById('tramitarCredenciales');
       if (tramitarBtn) {
           function toggleBounce() {
               tramitarBtn.classList.add('bounce-animation');
               setTimeout(() => { tramitarBtn.classList.remove('bounce-animation'); }, 2000);
           }
           setInterval(toggleBounce, 5000);
           setTimeout(toggleBounce, 3000);
       }

       const sections = document.querySelectorAll('.border-l-4');
       sections.forEach(section => {
           section.addEventListener('click', function() {
               sections.forEach(s => s.classList.remove('clicked'));
               this.classList.add('clicked');
           });
       });

       if (isIOS() && localStorage.getItem('iosBannerShown')) {
           const lastShownString = localStorage.getItem('iosBannerShown');
           // Ensure lastShownString is a valid date string before creating a Date object
           if (lastShownString && !isNaN(new Date(lastShownString).getTime())) {
                const lastShown = new Date(lastShownString);
                const daysSinceShown = (new Date().getTime() - lastShown.getTime()) / (1000 * 60 * 60 * 24);
                if (daysSinceShown > 7) {
                    localStorage.removeItem('iosBannerClosed');
                    localStorage.removeItem('iosBannerShown');
                    setTimeout(showIOSBanner, 2000);
                }
           } else {
                // Handle invalid date string, perhaps by resetting the localStorage item
                localStorage.removeItem('iosBannerShown'); // Or set to a default valid date
           }
       }
   });
   </script>
</body>
</html>
